<!DOCTYPE html>
<html>
<head>
    <title>–ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤</title>
    <link rel="stylesheet" href="static/css/global.css" />
    <link rel="stylesheet" href="static/css/style2.css" />
</head>
<body>
    <div class="screen">
        <div class="view">
          <div class="div">
            <div class="text-wrapper">–ó–∞–∫–∞–∑—ã | <span id="currentDate"></span></div>
            <script>
              const currentDateElement = document.getElementById("currentDate");
              const currentDate = new Date();
            
              // –û–ø—Ü–∏–∏ –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞—Ç—ã
              const options = { day: 'numeric', month: 'long' };
            
              // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –¥–∞—Ç—É
              const formattedDate = currentDate.toLocaleDateString('ru-RU', options);
            
              currentDateElement.textContent = formattedDate;
            </script>
            <div class="text-wrapper-2">–°—É—à–∏ –ë–∞–π—Ä–∞–º üëã</div>
          </div>
          <div class="view-2">
            <div class="plus-outline">
              <a href="/">
                <img class="vector" src="static/img/vector.svg" />
              </a>
            </div>
            <a href="/">
              <div class="frame"><div class="text-wrapper-3">–ù–æ–≤—ã–π –∑–∞–∫–∞–∑</div></div>
            </a>
          </div>
        </div>

      
    <table>
        <tr>
            <th class="text-wrapper-4">–ù–æ–º–µ—Ä</th>
            <th class="text-wrapper-4">–¢–µ–ª–µ—Ñ–æ–Ω</th>
            <th class="text-wrapper-4">–ó–∞–∫–∞–∑</th>
            <th class="text-wrapper-4">–ì–æ—Å—Ç–µ–π</th>
            <th class="text-wrapper-4">–ê–¥—Ä–µ—Å</th>
            <th class="text-wrapper-4">–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å</th>
            <th class="text-wrapper-4">–ú–µ—Ç–æ–¥ –æ–ø–ª–∞—Ç—ã</th>
            <th class="text-wrapper-4">–°—Ç–∞—Ç—É—Å –æ–ø–ª–∞—Ç—ã</th>
            <th class="text-wrapper-4">–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è</th>
        </tr>
        {% for order in orders %}
        <tr>
            <td class="text-wrapper-5">{{ order.id }}</td>
            <td class="text-wrapper-5">{{ order.phone }}</td>
            <td class="text-wrapper-5">{{ order.menu_items }}</td>
            <td class="text-wrapper-5">{{ order.num_clients }}</td>
            <td class="text-wrapper-5">{{ order.address }}</td>
            <td class="text-wrapper-5">{{ order.total_cost }} —Ä—É–±.</td>
            <td class="text-wrapper-5">{{ order.payment_method }}</td>
            <!-- ... (–≤–∞—à —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π HTML-–∫–æ–¥) ... -->
            <td class="text-wrapper-5">
              {% if not order.payment_status %}
                <span id="paymentStatus-{{ order.id }}"></span>
                <a class="frame" href="http://127.0.0.1:5000/today_orders" onclick="changePaymentStatus({{ order.id }}, '{{ url_for('change_payment_status') }}')">–û–ø–ª–∞—Ç–∏–ª–∏</a>
              {% else %}
                –û–ø–ª–∞—á–µ–Ω–æ
              {% endif %}
            </td>
            <!-- ... (–≤–∞—à —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π HTML-–∫–æ–¥) ... -->
            <td class="text-wrapper-5">{{ order.timestamp }}</td>

        </tr>
        {% endfor %}
    </table>
    <a href="/">–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –∑–∞–∫–∞–∑—É</a>
    </div>

    
    <<script>
  function changePaymentStatus(orderId, endpoint) {
      // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º AJAX-–∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞
      fetch(`${endpoint}?orderId=${orderId}`)
          .then(response => response.json())
          .then(data => {
              // –û–±–Ω–æ–≤–ª—è–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –≤ —è—á–µ–π–∫–µ
              document.getElementById(`paymentStatus-${orderId}`).textContent = data.newPaymentStatus;

              // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É
              location.reload();
          })
          .catch(error => console.error('Error:', error));
  }
</script>
</body>
</html>
